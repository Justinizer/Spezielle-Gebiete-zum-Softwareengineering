<html>
<head>
<meta charset="UTF-8">
<title>SHP</title>
<link rel="stylesheet" type="text/css" href="css/style.css">
<script type="text/javascript" src="js/jquery.js"></script>
<script type="text/javascript" src="js/site.js"></script>
<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
<script type="text/javascript">
  google.charts.load('current', {'packages':['corechart']});

  function drawChart(data, title) {
	data = google.visualization.arrayToDataTable(data);

	var options = {
	  title: title,
	  curveType: 'function',
	  explorer: { axis: 'horizontal', keepInBounds: true, maxZoomIn: 4.0},
	  legend: { position: 'bottom' }
	};

	var chart = new google.visualization.LineChart(document.getElementById('curve_chart'));

	chart.draw(data, options);
  }
</script>

</head>
<body>
	<div id="popup" class="modal">
		<div class="modal-content">
			<span class="close">&times;</span>
			<div id="curve_chart" style="width: 900px; height: 500px"></div>
		</div>
	</div>

	<div id="loginForm">
		<form action="javascript:submit()">
			Benutzername:<br> <input type="text" id="email" name="email" /><br>
			Passwort:<br> <input type="password" id="password"
				name="password" /><br> <input type="submit" class="button"
				value="Anmelden">
		</form>
	</div>

	<div id="content">
		<div id="automation">
			Konfigurierte Automatisierungen: <select id="comboAuto"></select>
			<input type="button" class="button" value="Löschen" onclick="deleteAutomation()">
			<input type="button" class="button" value="Regel hinzufügen" onclick="addAutomation()">
			<input type="button" class="button" value="Änderungen übernehmen" onclick="submitChanges()"><br>
			Name: <input type="text" id="automationNameField"><input type="checkbox" id="automationActivated">Aktiviert<br>
			<div style="margin-top: 10px;">
				<table id="tbCondition">
					<tr>
						<th>Wenn Sensor</th>
						<th>Bedingung</th>
						<th>Wert</th>
						<th></th>
					</tr>
					<tr><td colspan="3"></td><td><input type="button" class="button" value="Hinzufügen" onclick="addConditionRow()"></td></tr>
				</table>

				<table id="tbAction">
					<tr>
						<th>Dann Aktor</th>
						<th>Wert</th>
						<th></th>
					</tr>
					<tr><td colspan="2"></td><td><input type="button" class="button" value="Hinzufügen" onclick="addActionRow()"></td></tr>
				</table>
			</div>
		</div>
		<br>
		<div style="clear:left;">
			<table id="sensorTable">
				<tr>
					<th>Sensor</th>
					<th>Wert</th>
				</tr>
			</table>
			<table id="actorTable">
				<tr>
					<th>Aktor</th>
					<th>Wert</th>
					<th>Aktion</th>
				</tr>
			</table>
		</div>
		<br>
	</div>

	<script>

	var popup = document.getElementById('popup');
	var span = document.getElementsByClassName("close")[0];

	function openPopup(thingId, name) {
		popup.style.display = "block";		
		getAndDisplayDataInChart(thingId, name);
	}

	function openPopupImage(thingId, imageUrl){
		$('#curve_chart').empty();
		popup.style.display = "block";
		d = new Date();
		imageUrl += "?"+d.getTime();
		$('#curve_chart').css("background-image", "url("+ imageUrl + ")");  	
		
		
		
	}

	span.onclick = function() {
		popup.style.display = "none";
		$('#curve_chart').css("background-image", "none"); 
		$('#curve_chart').empty();
	}

	window.onclick = function(event) {
		if (event.target == popup) {
			popup.style.display = "none";
			$('#curve_chart').css("background-image", "none");
			$('#curve_chart').empty(); 
		}
	}
	</script>
</body>
</html>
